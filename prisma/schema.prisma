generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Exhibit {
  id                String   @id @default(uuid())
  inventoryNumber   String?
  title             String
  description       String
  fullDescription   String?  @default("")
  creationDate      String?
  studentName       String?
  studentCourse     String?
  studentGroup      String?
  supervisorId      String?
  dimensions        String?
  currentLocation   String?
  isPublic          Boolean  @default(true)
  
  category          String
  year              String?
  modelPath         String?
  has3DModel        Boolean  @default(false)
  previewImage      String?
  images            String   @default("[]")
  creationInfo      String?  @default("")
  technicalSpecs    String   @default("{}")
  interestingFacts   String   @default("[]")
  relatedExhibits   String   @default("[]")
  galleryPositionX  Float?
  galleryPositionY  Float?   @default(0)
  galleryPositionZ  Float?
  galleryScale       Float?   @default(1.0)
  galleryRotationY   Float?   @default(0)
  visibleInGallery   Boolean  @default(true)
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  supervisor        Supervisor? @relation(fields: [supervisorId], references: [id], onDelete: SetNull)

  @@index([category])
  @@index([year])
  @@index([studentName])
  @@index([supervisorId])
  @@index([visibleInGallery])
  @@index([isPublic])
}

model Supervisor {
  id         String    @id @default(uuid())
  name       String
  position   String?
  rank       String?
  department String?
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt

  exhibits   Exhibit[]

  @@unique([name])
  @@index([name])
}

model PageContent {
  id        String   @id @default("singleton")
  content   String
  updatedAt DateTime @updatedAt

  @@map("page_content")
}
